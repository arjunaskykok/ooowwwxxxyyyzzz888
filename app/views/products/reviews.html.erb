<div class="container">
  <div class="content">

    <h1><%= @product.title %></h1>

    <div class="rating">
      <div class="rating-inner">
        <div class="rating-number"><%= @ratings_average %></div>
        <div class="rating-stars">
          <%= print_stars(@ratings_average) %>
        </div>
      </div>
      <div class="add-review">
        <button class="review-button" id="add-review">
          Add review
        </button>
      </div>
    </div>

    <hr/>

    <h2>Reviews</h2>

    <div id="reviews-list">
      <% @reviews.each do |review| %>
      <div class="review-row">
        <div class="review-row-stars">
          <%= print_stars(review.stars) %>
        </div>
        <div class="review-row-number">
          <%= review.stars %>
        </div>
        <div class="review-row-text">
          <span>, </span>
          <span><%= review.body %></span>
        </div>
      </div>
      <% end %>
    </div>

  </div>
</div>

<div id="review-form" class="modal">
  <div class="modal-content">
    <h3>What's your rating?</h3>
    <div class="form-label">
      Rating
    </div>
    <div class="form-input">
      <div class="rating-stars" id="rating-input">
        <%= print_stars(3) %>
      </div>
      <input type="hidden" id="review-stars" name="review-stars" value="3" />
      <input type="hidden" id="review-product_id" name="review-product_id" value="<%= @product.id %>" />
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
    </div>
    <div class="form-label">
      Review
    </div>
    <div class="form-input">
      <input type="text" id="review-body" name="review-body" placeholder="Start typing...." />
    </div>
    <div class="form-input">
      <button class="review-button submit-review" id="submit-review">
        Submit review
      </button>
    </div>
  </div>
</div>

<%= javascript_pack_tag 'products' %>
